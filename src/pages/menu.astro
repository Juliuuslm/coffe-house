---
import MainLayout from '@/layouts/MainLayout.astro';
import { menuItems, menuCategories } from '@/data/menu';
---

<MainLayout
  title="Our Menu"
  description="Explore our carefully crafted menu of artisan coffees, specialty drinks, fresh pastries, and delicious breakfast options."
>
  <!-- Page Hero -->
  <section class="relative h-[60vh] flex items-center justify-center bg-gradient-to-br from-secondary-900 to-secondary-800">
    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=1920')] bg-cover bg-center opacity-20"></div>
    <div class="relative z-10 container-custom text-center text-white">
      <h1 class="text-h1 mb-6">Our Menu</h1>
      <p class="text-xl max-w-2xl mx-auto">
        Discover our selection of carefully crafted coffee and delicious treats
      </p>
    </div>
  </section>

  <!-- Menu Section -->
  <section class="section-padding">
    <div class="container-custom">
      <!-- Category Filter -->
      <div class="flex flex-wrap justify-center gap-4 mb-16">
        <button
          class="menu-filter-btn active px-8 py-3 rounded-full font-secondary font-semibold transition-all duration-300"
          data-category="all"
        >
          All Items
        </button>
        {
          menuCategories.map((category) => (
            <button
              class="menu-filter-btn px-8 py-3 rounded-full font-secondary font-semibold transition-all duration-300"
              data-category={category.id}
            >
              <span class="mr-2">{category.icon}</span>
              {category.name}
            </button>
          ))
        }
      </div>

      <!-- Menu Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="menu-grid">
        {
          menuItems.map((item) => (
            <div class="menu-item card-hover" data-category={item.category}>
              <div class="aspect-[4/3] overflow-hidden bg-gray-200">
                <img
                  src="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=600"
                  alt={item.name}
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="p-6">
                <div class="flex justify-between items-start mb-3">
                  <h3 class="text-h5 font-primary">{item.name}</h3>
                  <span class="text-primary font-bold text-lg flex-shrink-0 ml-4">
                    {item.price}
                  </span>
                </div>
                <p class="text-body text-sm mb-3">{item.description}</p>
                {item.featured && (
                  <span class="inline-block px-3 py-1 bg-primary/10 text-primary text-xs font-semibold rounded-full">
                    Popular
                  </span>
                )}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="section-padding-sm bg-gray-50">
    <div class="container-custom text-center">
      <h2 class="text-h3 mb-6">Ready to Order?</h2>
      <p class="text-body text-lg mb-8 max-w-2xl mx-auto">
        Visit us today or make a reservation for the best coffee experience
      </p>
      <a href="/contact" class="btn-primary btn-lg">
        Reserve a Table
      </a>
    </div>
  </section>
</MainLayout>

<script>
  function initMenuFilter() {
    const filterButtons = document.querySelectorAll('.menu-filter-btn');
    const menuItems = document.querySelectorAll('.menu-item');

    filterButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const category = button.getAttribute('data-category');

        // Update active button
        filterButtons.forEach((btn) => btn.classList.remove('active'));
        button.classList.add('active');

        // Filter menu items
        menuItems.forEach((item) => {
          const itemCategory = item.getAttribute('data-category');

          if (category === 'all' || itemCategory === category) {
            item.style.display = 'block';
            item.style.animation = 'fadeIn 0.5s ease-out';
          } else {
            item.style.display = 'none';
          }
        });
      });
    });
  }

  // Initialize on page load
  document.addEventListener('DOMContentLoaded', initMenuFilter);

  // Re-initialize on Astro page transitions
  document.addEventListener('astro:page-load', initMenuFilter);
</script>

<style>
  .menu-filter-btn {
    @apply border-2 border-gray-300 text-gray-700 hover:border-primary hover:text-primary;
  }

  .menu-filter-btn.active {
    @apply bg-primary text-white border-primary;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
</style>
